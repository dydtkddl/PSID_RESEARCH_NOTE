<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>{{ title if title else "ì—°êµ¬ë…¸íŠ¸ ë·°ì–´" }}</title>
  <link rel="stylesheet" href="{{ url_for('static', path='style.css') }}">
  <style>
    /* ì•„ì£¼ ìµœì†Œí•œì˜ ë‹¤í¬ëª¨ë“œ ì§€ì› (ê¸°ì¡´ CSS ìœ„ì— ì–¹ëŠ” ì •ë„) */
    body.dark {
      background: #111;
      color: #eee;
    }
    body.dark a {
      color: #9cd;
    }
    body.dark .header {
      background: #000;
    }
    body.dark .project-card {
      background: #222;
      border-color: #444;
    }
    .header-nav {
      display: flex;
      gap: 12px;
      align-items: center;
      font-size: 0.9rem;
    }
    .header-nav a {
      text-decoration: none;
    }
    #theme-toggle {
      border: none;
      background: transparent;
      cursor: pointer;
      font-size: 1.1rem;
    }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <h1 class="logo">
        <a href="{{ url_for('index') }}">ì—°êµ¬ë…¸íŠ¸ ë·°ì–´</a>
      </h1>
      <nav class="header-nav">
        <a href="{{ url_for('global_search') }}">ğŸ” ì „ì—­ ê²€ìƒ‰</a>
        <a href="{{ url_for('tasks_view') }}">âœ… í•  ì¼</a>
        <a href="{{ url_for('debug_log') }}">ğŸ“œ ë¡œê·¸</a>
        <button id="theme-toggle" title="ë¼ì´íŠ¸/ë‹¤í¬ ì „í™˜">ğŸŒ™</button>
      </nav>
    </div>
  </header>

  <main class="main">
    {% block content %}{% endblock %}
  </main>

  <script>
    // ë‹¤í¬ ëª¨ë“œ í† ê¸€
    (function() {
      const body = document.body;
      const btn = document.getElementById('theme-toggle');
      const saved = localStorage.getItem('nv_theme') || 'light';
      if (saved === 'dark') {
        body.classList.add('dark');
        if (btn) btn.textContent = 'â˜€ï¸';
      }

      if (btn) {
        btn.addEventListener('click', function() {
          const isDark = body.classList.toggle('dark');
          localStorage.setItem('nv_theme', isDark ? 'dark' : 'light');
          btn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
        });
      }
    })();

    // ì—ë””í„° í˜ì´ì§€ ë‹¨ì¶•í‚¤: Ctrl+S -> ì €ì¥, Ctrl+N -> ìƒˆ ë¬¸ì„œ
    (function() {
      document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && (e.key === 's' || e.key === 'S')) {
          const form = document.querySelector('form.editor-form');
          if (form) {
            e.preventDefault();
            form.submit();
          }
        }
      });
    })();
  </script>
</body>
</html>
