{% extends "base.html" %}
{% block title %}Recent - Research Platform{% endblock %}
{% block content %}
<div class="dashboard-page">
    <div class="page-header"><h1>Recent Documents</h1><p class="subtitle">Documents you recently viewed</p></div>
    <div class="doc-list" id="recent-list">
        <div class="loading-state"><div class="loading-spinner"></div><p>Loading...</p></div>
    </div>
</div>
{% endblock %}
{% block extra_scripts %}
<script>
document.addEventListener('DOMContentLoaded', async () => {
    const container = document.getElementById('recent-list');
    try {
        const docs = await api.get('/users/me/recent?limit=30');
        if (!docs || docs.length === 0) {
            container.innerHTML = '<div class="empty-state"><i class="ri-time-line"></i><span>No recent documents</span></div>';
            return;
        }
        container.innerHTML = docs.map(doc => `
            <a href="${appUrl('/documents/' + doc.id)}" class="doc-list-item">
                <span class="doc-icon">${doc.icon || 'ðŸ“„'}</span>
                <span class="doc-title">${escapeHtml(doc.title || 'Untitled')}</span>
                <span class="doc-date">${formatDate(doc.updated_at)}</span>
            </a>
        `).join('');
    } catch (e) { container.innerHTML = '<div class="empty-state"><i class="ri-error-warning-line"></i><span>Failed to load</span></div>'; }
});
</script>
{% endblock %}
